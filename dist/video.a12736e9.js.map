{"mappings":"A,C,E,A,A,W,iB,C,Q,A,E,Q,S,C,C,C,E,S,E,C,E,M,A,C,E,Y,O,Q,U,O,O,Q,C,S,C,E,O,O,C,E,S,C,E,O,G,Y,O,Q,E,W,G,Q,I,O,S,C,S,O,C,C,E,E,C,S,E,C,C,C,E,I,I,E,E,E,E,M,C,I,C,I,E,C,C,E,A,C,E,U,C,E,U,E,C,E,E,Y,C,C,E,U,G,C,E,Q,C,C,C,E,O,c,C,E,A,S,C,E,I,E,A,S,C,C,C,E,G,A,W,E,I,A,O,E,O,E,I,E,C,C,O,W,C,C,G,A,K,I,E,C,I,E,E,I,C,E,G,W,G,A,W,E,G,O,C,O,A,U,+C,C,M,A,C,A,W,E,O,M,E,E,E,E,U,M,A,W,E,G,E,O,E,E,E,G,E,E,C,C,O,c,C,E,O,C,a,C,M,C,C,G,E,O,C,K,C,K,ECAkBK,EAAAA,OAAAA,CAAAiC,KAAA,CAALA,e,E,EAQT,SAAAA,EAAYG,CAAO,EAAEwD,A,C,S,C,C,C,E,G,C,C,a,C,E,M,A,U,oC,C,EAAA,IAAA,CAAA3D,GAEjB,IAAI,CAACO,KAAK,CAAGJ,EACb,IAAI,CAACK,MAAM,CAAGf,KAAAA,EACd,IAAI,CAACgB,QAAQ,CAAG,IAAI,CAACF,KAAK,CAACG,OAAO,CAACC,OAAO,CAC1C,IAAI,CAACC,YAAY,CAAG,IAAI,CAACL,KAAK,CAACG,OAAO,CAACG,WAAW,CAClDC,OAAOC,cAAc,CAAGD,OAAOC,cAAc,EAAI,EAAE,CACnD,IAAI,CAACC,UAAU,CAAI,AAAsB,YAAtB,IAAI,CAACJ,YAAY,CAAkB,qCAAuC,yCAC7F,IAAI,CAACK,aAAa,CAAG,IAAI,CAACV,KAAK,CAACG,OAAO,CAACQ,EAAE,CAG1C,IAAI,CAACC,IAAI,EACb,CA0KC,O,EAvKDyC,CAAAA,CAAAzE,IAAAA,OAAAY,MAKA,WAGI,IAAI,CAACqB,WAAW,GAGhB,IAAI,CAACC,iBAAiB,EAE1B,CAGA,EAAA,CAAAlC,IAAAA,oBAAAY,MAKA,WAAoB,IAAAuB,EAAA,IAAA,CAChB,IAAI,CAACf,KAAK,CAACgB,gBAAgB,CAAC,QAAS,SAACC,CAAK,EACvCA,EAAMC,cAAc,GACpBH,EAAKI,MAAM,EACf,EACJ,CAGA,EAAA,CAAAvC,IAAAA,cAAAY,MAKA,WAGI,IAAIe,OAAOC,cAAc,CAACY,QAAQ,CAAC,IAAI,CAACX,UAAU,GAGlDF,OAAOC,cAAc,CAACa,IAAI,CAAC,IAAI,CAACZ,UAAU,EAG1C,IAAIa,EAASC,SAASC,aAAa,CAAC,SAGpCF,CAAAA,EAAOG,GAAG,CAAG,IAAI,CAAChB,UAAU,CAG5Bc,SAASG,IAAI,CAACC,WAAW,CAACL,GAE9B,CAGA,EAAA,CAAA1C,IAAAA,gBAAAY,MAKA,WAGI,IAAI,CAACoC,IAAI,GAGT,IAAI,CAAC3B,MAAM,CAAC4B,SAAS,EAEzB,CAGA,EAAA,CAAAjD,IAAAA,sBAAAY,MAMA,SAAoByB,CAAK,EACjBA,EAAMa,IAAI,EAAIC,GAAGC,WAAW,CAACC,KAAK,GAGlC,IAAI,CAAChC,MAAM,CAACiC,MAAM,CAAC,GAGnB,IAAI,CAACjC,MAAM,CAACkC,UAAU,GAGtB,IAAI,CAACC,IAAI,GAEjB,CAGA,EAAA,CAAAxD,IAAAA,SAAAY,MAKA,WAAS,IAAA6C,EAAA,IAAA,AAGD,CAAA,IAAI,CAACpC,MAAM,CACX,IAAI,CAACqC,IAAI,IAMiB,YAAtB,IAAI,CAACjC,YAAY,EACjB,CAAA,IAAI,CAACJ,MAAM,CAAG,IAAI8B,GAAGQ,MAAM,CAAC,IAAI,CAAC7B,aAAa,CAAE,CAC5CN,QAAS,IAAI,CAACF,QAAQ,CACtBsC,OAAQ,CACJC,QAAS,IAAI,CAACC,aAAa,CAACC,IAAI,CAAC,IAAI,EACrCC,cAAe,IAAI,CAACC,mBAAmB,CAACF,IAAI,CAAC,IAAI,CACrD,CACJ,EAAA,EAIsB,UAAtB,IAAI,CAACtC,YAAY,GACjB,IAAI,CAACJ,MAAM,CAAG,IAAI6C,MAAMP,MAAM,CAAC,IAAI,CAAC7B,aAAa,CAAE,CAC/CC,GAAI,IAAI,CAACT,QAAQ,CACjB6C,UAAW,CAAA,CACf,GAGA,IAAI,CAAC9C,MAAM,CAAC+C,EAAE,CAAC,OAAQ,WAAA,OAAMX,EAAKT,IAAI,EAAE,GACxC,IAAI,CAAC3B,MAAM,CAAC+C,EAAE,CAAC,QAAS,WAAA,OAAMX,EAAKD,IAAI,EAAE,GAGzC,IAAI,CAACR,IAAI,GAGT,IAAI,CAACU,IAAI,IAGrB,CAEA,EAAA,CAAA1D,IAAAA,OAAAY,MAKA,WAGI,IAAI,CAACoC,IAAI,GAER,AAAsB,YAAtB,IAAI,CAACvB,YAAY,CAAkB,IAAI,CAACJ,MAAM,CAAC4B,SAAS,GAAK,IAAI,CAAC5B,MAAM,CAACqC,IAAI,EAClF,CAGA,EAAA,CAAA1D,IAAAA,OAAAY,MAKA,WACI,IAAI,CAACQ,KAAK,CAACiD,SAAS,CAACC,GAAG,CAAC,UAC7B,CAGA,EAAA,CAAAtE,IAAAA,OAAAY,MAKA,WACI,IAAI,CAACQ,KAAK,CAACiD,SAAS,CAACE,MAAM,CAAC,UAChC,CAAC,EAAA,C,E,AAvKD1D,E,S,C,G,G,EAAAA,E,G,O,c,CAAAA,E,Y,C,S,C,C,GAuKCA,CAAA,G","sources":["<anon>","themes/mercury/source/scripts/components/video.js"],"sourcesContent":["(() => {\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire0837\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"bHj0q\", function(module, exports) {\n\"use strict\";\nObject.defineProperty(module.exports, \"__esModule\", {\n    value: true\n});\nmodule.exports.Video = void 0;\nfunction $8842740767fe12fa$var$_typeof(o) {\n    \"@babel/helpers - typeof\";\n    return $8842740767fe12fa$var$_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n        return typeof o;\n    } : function(o) {\n        return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, $8842740767fe12fa$var$_typeof(o);\n}\nfunction $8842740767fe12fa$var$_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction $8842740767fe12fa$var$_defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, $8842740767fe12fa$var$_toPropertyKey(descriptor.key), descriptor);\n    }\n}\nfunction $8842740767fe12fa$var$_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) $8842740767fe12fa$var$_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) $8842740767fe12fa$var$_defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n        writable: false\n    });\n    return Constructor;\n}\nfunction $8842740767fe12fa$var$_toPropertyKey(arg) {\n    var key = $8842740767fe12fa$var$_toPrimitive(arg, \"string\");\n    return $8842740767fe12fa$var$_typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction $8842740767fe12fa$var$_toPrimitive(input, hint) {\n    if ($8842740767fe12fa$var$_typeof(input) !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n    if (prim !== undefined) {\n        var res = prim.call(input, hint || \"default\");\n        if ($8842740767fe12fa$var$_typeof(res) !== \"object\") return res;\n        throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (hint === \"string\" ? String : Number)(input);\n}\nvar $8842740767fe12fa$var$Video = module.exports.Video = /*#__PURE__*/ function() {\n    /**\n   * \n   * Constructor\n   * \n   * @param {element} element video parent\n   */ function Video(element) {\n        $8842740767fe12fa$var$_classCallCheck(this, Video);\n        this.video = element;\n        this.player = undefined;\n        this.video_id = this.video.dataset.videoId;\n        this.video_source = this.video.dataset.videoSource;\n        window.loaded_scripts = window.loaded_scripts || [];\n        this.script_src = this.video_source === \"youtube\" ? \"https://www.youtube.com/iframe_api\" : \"https://player.vimeo.com/api/player.js\";\n        this.video_element = this.video.dataset.id;\n        // Initialise the video\n        this.init();\n    }\n    /**\n   * \n   * Initialise the video item\n   * \n   */ $8842740767fe12fa$var$_createClass(Video, [\n        {\n            key: \"init\",\n            value: function init() {\n                // Load the scripts\n                this.loadScripts();\n                // Attach the event listeners\n                this.addEventListeners();\n            }\n        },\n        {\n            key: \"addEventListeners\",\n            value: function addEventListeners() {\n                var _this = this;\n                this.video.addEventListener(\"click\", function(event) {\n                    event.preventDefault();\n                    _this.create();\n                });\n            }\n        },\n        {\n            key: \"loadScripts\",\n            value: function loadScripts() {\n                // If the script has already been loaded, return\n                if (window.loaded_scripts.includes(this.script_src)) return;\n                // Add the script to the loaded scripts array\n                window.loaded_scripts.push(this.script_src);\n                // Create the script tag\n                var script = document.createElement(\"script\");\n                // Set the script source\n                script.src = this.script_src;\n                // Append the script to the body\n                document.body.appendChild(script);\n            }\n        },\n        {\n            key: \"onPlayerReady\",\n            value: function onPlayerReady() {\n                // Show the video and hide the thumbnail\n                this.show();\n                // Play the youtube video\n                this.player.playVideo();\n            }\n        },\n        {\n            key: \"onPlayerStateChange\",\n            value: function onPlayerStateChange(event) {\n                if (event.data == YT.PlayerState.ENDED) {\n                    // Reset the video to the start\n                    this.player.seekTo(0);\n                    // Pause the video\n                    this.player.pauseVideo();\n                    // Hide the video and show the thumbnail\n                    this.hide();\n                }\n            }\n        },\n        {\n            key: \"create\",\n            value: function create() {\n                var _this2 = this;\n                // If the pkayer has already been created, then just hit play\n                if (this.player) this.play();\n                else {\n                    // Youtube specific video createion\n                    if (this.video_source === \"youtube\") this.player = new YT.Player(this.video_element, {\n                        videoId: this.video_id,\n                        events: {\n                            onReady: this.onPlayerReady.bind(this),\n                            onStateChange: this.onPlayerStateChange.bind(this)\n                        }\n                    });\n                    // Vimeo specific video creation\n                    if (this.video_source === \"vimeo\") {\n                        this.player = new Vimeo.Player(this.video_element, {\n                            id: this.video_id,\n                            autopause: false\n                        });\n                        // Attach the event listeners\n                        this.player.on(\"play\", function() {\n                            return _this2.show();\n                        });\n                        this.player.on(\"ended\", function() {\n                            return _this2.hide();\n                        });\n                        // Show the video and hide the thumbnail\n                        this.show();\n                        // Play the vimeo video\n                        this.play();\n                    }\n                }\n            }\n        },\n        {\n            key: \"play\",\n            value: function play() {\n                // Show the video and hide the thumbnail\n                this.show();\n                this.video_source === \"youtube\" ? this.player.playVideo() : this.player.play();\n            }\n        },\n        {\n            key: \"show\",\n            value: function show() {\n                this.video.classList.add(\"playing\");\n            }\n        },\n        {\n            key: \"hide\",\n            value: function hide() {\n                this.video.classList.remove(\"playing\");\n            }\n        }\n    ]);\n    return Video;\n}();\n\n});\n\n})();\n//# sourceMappingURL=video.a12736e9.js.map\n","export class Video {\n\n    /**\n     * \n     * Constructor\n     * \n     * @param {element} element video parent\n     */\n    constructor(element) {\n\n        this.video = element;\n        this.player = undefined;\n        this.video_id = this.video.dataset.videoId;\n        this.video_source = this.video.dataset.videoSource;\n        window.loaded_scripts = window.loaded_scripts || [];\n        this.script_src = (this.video_source === 'youtube') ? 'https://www.youtube.com/iframe_api' : 'https://player.vimeo.com/api/player.js';\n        this.video_element = this.video.dataset.id;\n\n        // Initialise the video\n        this.init();\n    }\n\n\n    /**\n     * \n     * Initialise the video item\n     * \n     */\n    init() {\n\n        // Load the scripts\n        this.loadScripts();\n\n        // Attach the event listeners\n        this.addEventListeners();\n\n    }\n\n\n    /**\n     * \n     * Add the click event handler to the video\n     * \n     */\n    addEventListeners() {\n        this.video.addEventListener('click', (event) => {\n            event.preventDefault();\n            this.create()\n        });\n    }\n\n\n    /**\n     * \n     * Load the scripts if they have not already been loaded\n     * \n     */\n    loadScripts() {\n\n        // If the script has already been loaded, return\n        if (window.loaded_scripts.includes(this.script_src)) return;\n\n        // Add the script to the loaded scripts array\n        window.loaded_scripts.push(this.script_src);\n\n        // Create the script tag\n        let script = document.createElement('script');\n\n        // Set the script source\n        script.src = this.script_src;\n\n        // Append the script to the body\n        document.body.appendChild(script);\n\n    }\n\n\n    /**\n     * \n     * Youtube on player ready event handler\n     * \n     */\n    onPlayerReady() {\n\n        // Show the video and hide the thumbnail\n        this.show();\n\n        // Play the youtube video\n        this.player.playVideo();\n\n    }\n\n\n    /**\n     * \n     * Youytube Player play state event handler\n     * \n     * @param {event} event\n     */\n    onPlayerStateChange(event) {\n        if (event.data == YT.PlayerState.ENDED) {\n\n            // Reset the video to the start\n            this.player.seekTo(0)\n\n            // Pause the video\n            this.player.pauseVideo();\n\n            // Hide the video and show the thumbnail\n            this.hide();\n        }\n    }\n\n\n    /**\n     * \n     * Create the video player instance\n     * \n     */\n    create() {\n\n        // If the pkayer has already been created, then just hit play\n        if (this.player) {\n            this.play();\n        }\n        // Otherwise we will need to create the player first\n        else {\n\n            // Youtube specific video createion\n            if (this.video_source === 'youtube') {\n                this.player = new YT.Player(this.video_element, {\n                    videoId: this.video_id,\n                    events: {\n                        onReady: this.onPlayerReady.bind(this),\n                        onStateChange: this.onPlayerStateChange.bind(this)\n                    }\n                });\n            }\n\n            // Vimeo specific video creation\n            if (this.video_source === 'vimeo') {\n                this.player = new Vimeo.Player(this.video_element, {\n                    id: this.video_id,\n                    autopause: false\n                });\n\n                // Attach the event listeners\n                this.player.on('play', () => this.show());\n                this.player.on('ended', () => this.hide());\n\n                // Show the video and hide the thumbnail\n                this.show();\n\n                // Play the vimeo video\n                this.play();\n            }\n        }\n    }\n\n    /**\n     * \n     * Play the video instance\n     * \n     */\n    play() {\n\n        // Show the video and hide the thumbnail\n        this.show();\n\n        (this.video_source === 'youtube') ? this.player.playVideo() : this.player.play();\n    }\n\n\n    /**\n     * \n     * Show the video and hide the thumbnail\n     * \n     */\n    show() {\n        this.video.classList.add('playing');\n    }\n\n\n    /**\n     * \n     * Hide the video and show the thumbnail\n     * \n     */\n    hide() {\n        this.video.classList.remove('playing');\n    }\n\n\n}\n\n"],"names":["parcelRequire","$parcel$global","globalThis","register","module","exports","$8842740767fe12fa$var$_typeof","o","Symbol","iterator","constructor","prototype","$8842740767fe12fa$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","$8842740767fe12fa$var$_toPropertyKey","arg","key","$8842740767fe12fa$var$_toPrimitive","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","value","Video","protoProps","staticProps","element","$8842740767fe12fa$var$_classCallCheck","instance","Constructor","video","player","video_id","dataset","videoId","video_source","videoSource","window","loaded_scripts","script_src","video_element","id","init","loadScripts","addEventListeners","_this","addEventListener","event","preventDefault","create","includes","push","script","document","createElement","src","body","appendChild","show","playVideo","data","YT","PlayerState","ENDED","seekTo","pauseVideo","hide","_this2","play","Player","events","onReady","onPlayerReady","bind","onStateChange","onPlayerStateChange","Vimeo","autopause","on","classList","add","remove","_classCallCheck","_createClass"],"version":3,"file":"video.a12736e9.js.map"}